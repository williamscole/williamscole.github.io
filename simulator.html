<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PONDEROSA Pedigree Simulator Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 4px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .note {
            background-color: #e7f3fe;
            border-left: 6px solid #2196F3;
            margin-bottom: 15px;
            padding: 4px 12px;
        }
    </style>
</head>
<body>
    <h1>PONDEROSA Pedigree Simulator</h1>
    
    <h2>Overview</h2>
    <p>The PONDEROSA Pedigree Simulator is a tool designed to generate training data for PONDEROSA.</p>

    <h2>Installation</h2>
    <p>The PONDEROSA Pedigree Simulator uses a modified version of Ped-Sim, that gives the Simulator pipeline more control over the input founder individuals.</p>
    <pre><code>git clone https://github.com/williamscole/ped-sim.git
cd ped-sim
make
./setup.sh</code></pre>
    <p>Ensure you have Python 3.8 or later installed on your system.</p>

    <h2>Usage</h2>
    <h3>Basic Command</h3>
    <pre><code>python ponderosa_simulator.py [options]</code></pre>

    <h3>Options</h3>
    <ul>
        <li><code>--num_generations</code>: Number of generations to simulate (default: 3)</li>
        <li><code>--family_size</code>: Average number of children per family (default: 2)</li>
        <li><code>--population_size</code>: Total number of individuals to simulate (default: 100)</li>
        <li><code>--output_prefix</code>: Prefix for output files (default: "simulated_pedigree")</li>
        <li><code>--snp_count</code>: Number of SNPs to simulate (default: 10000)</li>
        <li><code>--mutation_rate</code>: Mutation rate per generation (default: 1e-8)</li>
        <li><code>--recombination_rate</code>: Recombination rate (default: 1e-8)</li>
        <li><code>--seed</code>: Random seed for reproducibility (default: None)</li>
    </ul>

    <h3>Example</h3>
    <pre><code>python ponderosa_simulator.py --num_generations 4 --family_size 3 --population_size 200 --output_prefix my_simulation --snp_count 20000</code></pre>

    <h2>Output Files</h2>
    <p>The simulator generates the following files:</p>
    <ul>
        <li><code>[output_prefix].ped</code>: PLINK-formatted pedigree file</li>
        <li><code>[output_prefix].map</code>: PLINK-formatted map file</li>
        <li><code>[output_prefix].vcf</code>: VCF file containing simulated genotypes</li>
        <li><code>[output_prefix]_relationships.txt</code>: True relationships between individuals</li>
    </ul>

    <h2>Simulated Relationships</h2>
    <p>The simulator can generate various relationship types, including:</p>
    <ul>
        <li>Parent-Child</li>
        <li>Full Siblings</li>
        <li>Half Siblings</li>
        <li>Grandparent-Grandchild</li>
        <li>Avuncular (Aunt/Uncle-Niece/Nephew)</li>
        <li>First Cousins</li>
    </ul>

    <h2>Customizing Simulations</h2>
    <p>Advanced users can modify the simulation parameters by editing the configuration file:</p>
    <pre><code>python ponderosa_simulator.py --config custom_config.yaml</code></pre>

    <div class="note">
        <p><strong>Note:</strong> The simulator is designed for testing and demonstration purposes. While it aims to create realistic genetic patterns, it may not capture all the complexities of real-world genetic inheritance.</p>
    </div>

    <h2>Integration with PONDEROSA</h2>
    <p>The output files from the PONDEROSA Pedigree Simulator are compatible with PONDEROSA input formats. You can use the simulated data to test PONDEROSA's performance or to demonstrate its capabilities on known pedigree structures.</p>

    <h2>Troubleshooting</h2>
    <ul>
        <li><strong>Memory Issues:</strong> For large simulations, increase available memory or reduce the population size and SNP count.</li>
        <li><strong>Runtime:</strong> Simulations with many generations or large population sizes may take considerable time. Consider running them on a high-performance computing environment.</li>
        <li><strong>File Formats:</strong> Ensure that PONDEROSA is correctly configured to read the simulator's output formats.</li>
    </ul>

    <h2>Contributing</h2>
    <p>We welcome contributions to improve the PONDEROSA Pedigree Simulator. Please submit issues and pull requests to our GitHub repository: [GitHub Repository Link]</p>

    <footer>
        <p>For more information on PONDEROSA, visit the <a href="ponderosa.html">main PONDEROSA documentation</a>.</p>
    </footer>
</body>
</html>
